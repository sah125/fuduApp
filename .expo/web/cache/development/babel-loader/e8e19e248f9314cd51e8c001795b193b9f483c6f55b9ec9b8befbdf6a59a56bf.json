{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport instance from \"../../axios/axios-instance\";\nexport var FORGOT_PASSWORD_REQUEST = \"FORGOT_PASSWORD_REQUEST\";\nexport var FORGOT_PASSWORD_SUCCESS = \"FORGOT_PASSWORD_SUCCESS\";\nexport var FORGOT_PASSWORD_FAILURE = \"FORGOT_PASSWORD_FAILURE\";\nexport var RESET_PASSWORD_REQUEST = 'RESET_PASSWORD_REQUEST';\nexport var RESET_PASSWORD_SUCCESS = 'RESET_PASSWORD_SUCCESS';\nexport var RESET_PASSWORD_FAILURE = 'RESET_PASSWORD_FAILURE';\nexport var loginRequest = function loginRequest(credentials) {\n  return {\n    type: \"LOGIN_REQUEST\",\n    payload: credentials\n  };\n};\nexport var loginSuccess = function loginSuccess(user) {\n  return {\n    type: \"LOGIN_SUCCESS\",\n    payload: {\n      user: user\n    }\n  };\n};\nexport var loginFailure = function loginFailure(error) {\n  return {\n    type: \"LOGIN_FAILURE\",\n    payload: {\n      error: error\n    }\n  };\n};\nexport var forgotPasswordRequest = function forgotPasswordRequest() {\n  return {\n    type: FORGOT_PASSWORD_REQUEST\n  };\n};\nexport var forgotPasswordSuccess = function forgotPasswordSuccess() {\n  return {\n    type: FORGOT_PASSWORD_SUCCESS\n  };\n};\nexport var forgotPasswordFailure = function forgotPasswordFailure(error) {\n  return {\n    type: FORGOT_PASSWORD_FAILURE,\n    payload: {\n      error: error\n    }\n  };\n};\nexport var resetPasswordRequest = function resetPasswordRequest() {\n  return {\n    type: RESET_PASSWORD_REQUEST\n  };\n};\nexport var resetPasswordSuccess = function resetPasswordSuccess() {\n  return {\n    type: RESET_PASSWORD_SUCCESS\n  };\n};\nexport var resetPasswordFailure = function resetPasswordFailure(error) {\n  return {\n    type: RESET_PASSWORD_FAILURE,\n    payload: {\n      error: error\n    }\n  };\n};\nexport var forgotPassword = function forgotPassword(email) {\n  return function () {\n    var _ref = _asyncToGenerator(function* (dispatch) {\n      dispatch(forgotPasswordRequest());\n      try {\n        yield instance.post(\"/Auth/forgotPassword\", {\n          email: email\n        });\n        dispatch(forgotPasswordSuccess());\n      } catch (error) {\n        console.log(error.message);\n        dispatch(forgotPasswordFailure(error.message));\n      }\n    });\n    return function (_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n};\nexport var resetPassword = function resetPassword(password, confirmPassword) {\n  return function () {\n    var _ref2 = _asyncToGenerator(function* (dispatch) {\n      dispatch(resetPasswordRequest);\n      if (password !== confirmPassword) {\n        dispatch(resetPasswordFailure(\"Passwords do not match.\"));\n        return;\n      }\n      try {\n        yield instance.post('/Auth/resetPassword', {\n          password: password\n        });\n        dispatch(resetPasswordSuccess);\n      } catch (error) {\n        console.log(error.message);\n        dispatch(resetPasswordFailure(error.message));\n      }\n    });\n    return function (_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n};\nexport var login = function login(credentials) {\n  return function () {\n    var _ref3 = _asyncToGenerator(function* (dispatch) {\n      dispatch(loginRequest(credentials));\n      try {\n        var response = yield instance.post(\"/Auth/login\", credentials);\n        var user = response.data;\n        dispatch(loginSuccess(user));\n      } catch (error) {\n        console.log(error.message);\n        dispatch(loginFailure(error.message));\n      }\n    });\n    return function (_x3) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n};","map":{"version":3,"names":["instance","FORGOT_PASSWORD_REQUEST","FORGOT_PASSWORD_SUCCESS","FORGOT_PASSWORD_FAILURE","RESET_PASSWORD_REQUEST","RESET_PASSWORD_SUCCESS","RESET_PASSWORD_FAILURE","loginRequest","credentials","type","payload","loginSuccess","user","loginFailure","error","forgotPasswordRequest","forgotPasswordSuccess","forgotPasswordFailure","resetPasswordRequest","resetPasswordSuccess","resetPasswordFailure","forgotPassword","email","_ref","_asyncToGenerator","dispatch","post","console","log","message","_x","apply","arguments","resetPassword","password","confirmPassword","_ref2","_x2","login","_ref3","response","data","_x3"],"sources":["/Users/rodwellshibambu/Documents/resapp/Fudu App/redux/Actions/auth.Actions.ts"],"sourcesContent":["import { Action } from \"redux\";\nimport { ILogin } from \"../../core/login\";\nimport { ThunkAction } from \"redux-thunk\";\nimport axios from \"axios\";\nimport instance from \"../../axios/axios-instance\";\n\nexport const FORGOT_PASSWORD_REQUEST = \"FORGOT_PASSWORD_REQUEST\";\nexport const FORGOT_PASSWORD_SUCCESS = \"FORGOT_PASSWORD_SUCCESS\";\nexport const FORGOT_PASSWORD_FAILURE = \"FORGOT_PASSWORD_FAILURE\";\n\nexport const RESET_PASSWORD_REQUEST = 'RESET_PASSWORD_REQUEST';\nexport const RESET_PASSWORD_SUCCESS = 'RESET_PASSWORD_SUCCESS';\nexport const RESET_PASSWORD_FAILURE = 'RESET_PASSWORD_FAILURE';\n\n\nexport interface ResetPasswordRequestAction extends Action<typeof RESET_PASSWORD_REQUEST> {\n}\nexport interface ResetPasswordSuccessAction extends Action<typeof RESET_PASSWORD_SUCCESS> {\n}\nexport interface ResetPasswordFailureAction extends Action<typeof RESET_PASSWORD_FAILURE> {\n  payload: {\n    error: string; // Error message\n  };\n}\n\nexport interface ForgotPasswordRequestAction extends Action<typeof FORGOT_PASSWORD_REQUEST> {\n}\n\nexport interface ForgotPasswordSuccessAction extends Action<typeof FORGOT_PASSWORD_SUCCESS> {\n}\n\nexport interface ForgotPasswordFailureAction extends Action<typeof FORGOT_PASSWORD_FAILURE> {\n  payload: {\n    error: string;\n  };\n}\n\n\nexport interface LoginRequestAction extends Action<\"LOGIN_REQUEST\"> {\n  payload: ILogin;\n}\n\nexport interface LoginSuccessAction extends Action<\"LOGIN_SUCCESS\"> {\n  payload: {\n    user: any;\n  };\n}\n\nexport interface LoginFailureAction extends Action<\"LOGIN_FAILURE\"> {\n  payload: {\n    error: string;\n  };\n}\n\nexport type AuthAction =\n  | LoginRequestAction\n  | LoginSuccessAction\n  | LoginFailureAction\n  | ForgotPasswordRequestAction\n  | ForgotPasswordSuccessAction\n  | ForgotPasswordFailureAction\n  | ResetPasswordFailureAction\n  | ResetPasswordRequestAction\n  | ResetPasswordSuccessAction;\n\n\n \n  \n\nexport const loginRequest = (credentials: ILogin): LoginRequestAction => ({\n  type: \"LOGIN_REQUEST\",\n  payload: credentials,\n});\n\nexport const loginSuccess = (user: any): LoginSuccessAction => ({\n  type: \"LOGIN_SUCCESS\",\n  payload: { user },\n});\n\nexport const loginFailure = (error: string): LoginFailureAction => ({\n  type: \"LOGIN_FAILURE\",\n  payload: { error },\n});\n\nexport const forgotPasswordRequest = (): ForgotPasswordRequestAction => ({\n  type: FORGOT_PASSWORD_REQUEST,\n});\n\nexport const forgotPasswordSuccess = (): ForgotPasswordSuccessAction => ({\n  type: FORGOT_PASSWORD_SUCCESS,\n});\n\nexport const forgotPasswordFailure = (error: string): ForgotPasswordFailureAction => ({\n  type: FORGOT_PASSWORD_FAILURE,\n  payload: { error },\n});\n\nexport const resetPasswordRequest = (): ResetPasswordRequestAction => ({\n  type:RESET_PASSWORD_REQUEST,\n});\n\nexport const resetPasswordSuccess =():ResetPasswordSuccessAction=>({\n  type:RESET_PASSWORD_SUCCESS,\n});\n\nexport const resetPasswordFailure =(error: string):ResetPasswordFailureAction => ({\n  type:RESET_PASSWORD_FAILURE,\n  payload: {error},\n});\n\n// Thunk for \"forgot password\" functionality\nexport const forgotPassword = (email: string): ThunkAction<void, any, unknown, AuthAction> => {\n  return async (dispatch) => {\n    dispatch(forgotPasswordRequest());\n    try {\n      await instance.post(\"/Auth/forgotPassword\", { email });\n      dispatch(forgotPasswordSuccess());\n    } catch (error: any) {\n      console.log(error.message);\n      dispatch(forgotPasswordFailure(error.message));\n    }\n  };\n};\n\nexport const resetPassword =(password: string, confirmPassword: string):ThunkAction<void, any, unknown, AuthAction> => {\n  return async (dispatch) => {\n    dispatch(resetPasswordRequest);\n\n       if(password !== confirmPassword){\n       dispatch(resetPasswordFailure(\"Passwords do not match.\"));\n        return;\n       }\n       try {\n        // API request to reset password\n        await instance.post('/Auth/resetPassword', { password }); // Adjust the API endpoint\n  \n       dispatch(resetPasswordSuccess);\n\n      } catch (error: any) {\n        console.log(error.message);\n     dispatch(resetPasswordFailure(error.message));\n      }\n    };\n  };\n\n\n\n\n\n\nexport const login = (\n  credentials: ILogin\n): ThunkAction<void, any, unknown, AuthAction> => {\n  return async (dispatch) => {\n    dispatch(loginRequest(credentials));\n    try {\n      // Make a POST request to your login API endpoint\n      const response = await instance.post(\"/Auth/login\", credentials);\n\n      // Assuming the API response contains the user data\n      const user: any = response.data;\n\n      dispatch(loginSuccess(user));\n    } catch (error: any) {\n      console.log(error.message)\n      dispatch(loginFailure(error.message));\n    }\n  };\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}